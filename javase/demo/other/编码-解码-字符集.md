# 编码、解码、字符集

1. 计算机中存储的所有内容都是以二进制形式存储的，包括视频、图片、音频、文本、...
2. 字符编码 & 字符解码 
    * 编码：将字符存储到计算机的过程中，OS会将其转化成人看不懂的二进制流，这个过程叫做字符编码
    * 解码：读取并展示相应字符时，OS会自动将人看不懂的二进制数据转换成人能看懂的字符，这个过程就叫做解码
3. 乱码问题
    * 如果使用某规则编码存储，然后使用相同的规则解码展示，则不会出现乱码
    * 反之，如果编码遵循某种规则，解码使用另一种规则，则会出现乱码
4. 字符编解码（编码表/字符集）：字符和二进制数据之间的对应规则
5. 当今社会中存在多种字符集，如ASCII、Unicode（utf-8/16/32）、GB（GB2312/GBK/GB18030）....
6. 不同字符集，同一个字符和二进制数据之间的对应规则不同
7. 所以，字符编码和解码的过程中最好使用相同的字符集，否则编码规则和解码规则对不上，就容易出现乱码问题
8. 世界上多个国家出现了许许多多的字符集，不同组织可以灵活选用自己想用的字符集，这样就导致不同组织之间的APP的不兼容问题。
    * 为了终结上述乱象，国际标准化组织发布了世界通用的字符集Unicode(包含UTF-8/16/32..)
    * Unicode字符集包含多个系列：（utf-8/16/32）
    * Unicode字符集涵盖了世界所有国家的文字和特殊符号
    * Unicode采用变长编码的编码规则：
        + ASCII中的字符使用一个byte的二进制数据表示
        + 拉丁文使用2byte的二进制数据表示
        + 常用字符，包含中文等，使用3byte的二进制数据表示
        + 其他不常用字符，使用4byte的二进制数据表示
    * 推荐使用UTF-8字符集
9. 备注：GBK中使用2byte表示一个汉字，但是utf-8中使用3byte表示一个汉字
    * 在某些需要特别关注性能的场合，有可能使用GBK更好，因为毕竟占用存储空间相对小很多
10. 如果文件存储时使用的是GBK编码方式，那么一个汉字就会被转换成两个字节的二进制数据存储到磁盘中；
读取文件时如果试图使用UTF-8字符集（解码规则）来解码读取文件获得的二进制流，
就会尝试将二进制流中三个字节的内容转换为一个中文，这显然得不到正确的结果，解码得到的只能是乱码。
综上所述，编码和解码使用不同的字符集（编解码规则），必然会引发乱码问题。
11. 所以，解决乱码问题的根本途径就是：使用相同的规则进行编码和解码，也就是使用相同的字符集进行字符的编码和解码，
文件存储时若是使用GBK编码方式转成了二进制流持久化到计算机磁盘的；
那么请你读取磁盘文件，将二进制流转化成字符（解码）时，也一定要使用GBK字符集。

参考资料：
1. [编码、解码、字符集](https://www.bilibili.com/video/BV1U4411V7rq?p=48)
2. [编码解码字符集不一致导致的乱码问题演示](https://www.bilibili.com/video/BV1U4411V7rq?p=49)
3. [文件字节字符转换流的原理](https://www.bilibili.com/video/BV1U4411V7rq?p=50)
4. [解决文件IO中文乱码问题-写文件](https://www.bilibili.com/video/BV1U4411V7rq?p=51)
5. [解决文件IO中文乱码问题-读文件](https://www.bilibili.com/video/BV1U4411V7rq?p=52)